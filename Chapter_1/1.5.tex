\documentclass[../main.tex]{subfiles}
\begin{document}

用 $2^\Omega$ 表示 $\Omega$ 的幂集，即 $\Omega$ 的所有子集组成的集合。

\begin{definition}\label{def:1.5.1}
    \emph{事件集类} $\mathcal{F}\subset 2^\Omega$ 必须满足所谓 $\sigma$-代数的性质：
    \begin{enumerate}
        \item $\Omega\in\mathcal{F}$
        \item $A\in\mathcal{F}\Rightarrow A^c\in\mathcal{F}$（对补运算的封闭性）
        \item $A_i\in\mathcal{F},\forall i\in\mathbb{N}^*\Rightarrow \bigcup_{i=1}^\infty A_i\in\mathcal{F}$（对可列并的封闭性）
    \end{enumerate}
\end{definition}

\begin{example}
    $\Omega=\{a,b,c,d\}$，以下是一些合法的事件集类：
    \begin{enumerate}
        \item $\mathcal{F}_1=2^\Omega$
        \item $\mathcal{F}_2=\{\Omega,\varnothing\}$
        \item $\mathcal{F}_3=\{\Omega,\varnothing,\{a,b\},\{c,d\}\}$
    \end{enumerate}
\end{example}

\begin{definition}\label{def:1.5.2}
    (Kolmogorov) \emph{概率函数} $P:\mathcal{F}\rightarrow\mathbb{R}$ 是满足以下三条公理的映射：
    \begin{enumerate}
        \item $P(A)\geq 0,\forall A\in\mathcal{F}$
        \item $P(\Omega)=1$
        \item $A_i\in\mathcal{F},\forall i\in\mathbb{N}^*,A_iA_j=\varnothing,\forall i\neq j\Rightarrow P(\sum_{i=1}^\infty A_i)=\sum_{i=1}^\infty P(A_i)$（加法公理/可列可加性）
    \end{enumerate}
    称 $(\Omega,\mathcal{F},P)$ 是一个\emph{概率空间}。
\end{definition}

\begin{proposition}
    关于概率空间，有如下性质：
    \begin{enumerate}
        \item $P(A)\leq 1,\ \forall A\in\mathcal{F}$
        \item $P(\varnothing)=0$
        \item $P(A)+P(A^c)=1$
        \item $A_i\in\mathcal{F},\forall i\in\{1,2,\cdots,n\},\ A_iA_j=\varnothing,\forall i\neq j\Rightarrow P(\sum_{i=1}^n A_i)=\sum_{i=1}^n P(A_i)$（有限可加性）
        \item $A\subset B\Rightarrow P(A)\leq P(B)$（称事件 $A$ \emph{蕴涵}事件 $B$）
        \item $P(A_1+\cdots+A_n)  \begin{aligned}[t]
                      = & \sum_{i=1}^n P(A_i)-\sum_{i_1<i_2}P(A_{i_1}A_{i_2})                       \\
                      + & \cdots+(-1)^{r+1}\sum_{i_1<i_2<\cdots<i_r}P(A_{i_1}A_{i_2}\cdots A_{i_r}) \\
                      + & \cdots+(-1)^{n+1}P(A_1\cdots A_n)
                  \end{aligned}$（容斥公式）\\
              特别地，$P(A+B)=P(A)+P(B)-P(AB)$。
    \end{enumerate}
\end{proposition}

\begin{example}
    （配对问题）\\
    有 $n$ 个人，每人有一顶帽子。现将所有帽子放到一起，再随机分配给每人一顶，考虑无人拿到自己的帽子的概率。\\
    为此，设事件 $A_i$ 为“第 $i$ 个人拿到自己的帽子”，则 $P(A_i)=1/n$。\\
    利用容斥公式，至少一人拿到自己帽子的概率为
    \begin{equation*}
        \begin{aligned}
              & P(A_1+\cdots+A_n)                                                         \\
            = & \sum_{i=1}^n P(A_i)-\sum_{i_1<i_2}P(A_{i_1}A_{i_2})                       \\
            + & \cdots+(-1)^{r+1}\sum_{i_1<i_2<\cdots<i_r}P(A_{i_1}A_{i_2}\cdots A_{i_r}) \\
            + & \cdots+(-1)^{n+1}P(A_1\cdots A_n)
        \end{aligned}
    \end{equation*}
    其中 $\sum_{i_1<i_2<\cdots<i_r}P(A_{i_1}A_{i_2}\cdots A_{i_r})=\frac{(n-r)!}{n!}\tbinom{n}{r}=\frac{1}{r!}$，即 $P(A_1+\cdots+A_n)=1-\frac{1}{2!}+\frac{1}{3!}-\frac{1}{4!}+\cdots+(-1)^{r+1}\frac{1}{r!}+\cdots+(-1)^{n+1}\frac{1}{n!}$。\\
    所求概率 $P_n=1-P(A_1+\cdots+A_n)=1-(1-\frac{1}{2!}+\cdots+(-1)^{n+1}\frac{1}{n!})\rightarrow e^{-1}(n\rightarrow+\infty)$。\\
    思考：恰有 $k$ 个人拿到自己的帽子的概率？
\end{example}

\end{document}
